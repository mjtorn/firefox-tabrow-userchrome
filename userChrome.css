/* MULTI-ROW TABS
   based on https://www.reddit.com/r/FirefoxCSS/comments/7dclp7/multirow_tabs_in_ff57/ 
   If tabs are too narrow, go into about:config and adjust browser.tabs.tabMinWidth
*/

/* General Rules */
#tabbrowser-tabs .arrowscrollbox-scrollbox {
  overflow: visible; 
  display: block;
}
#tabbrowser-tabs .scrollbox-innerbox {
  display: flex;
  flex-wrap: wrap;
  min-height: var(--tab-min-height);
  max-height: calc((3 * var(--tab-min-height)) + 1px) !important; /* up to 3 rows */
}
.tabbrowser-tab, .tab-background {
  height: var(--tab-min-height);
}
.tab-stack {
  width: 100%;
}
#main-window[sizemode="normal"] #TabsToolbar {
  border-left: 1px solid #888 !important;
}
/* Title bar rules */
#titlebar, #titlebar-buttonbox {
  height: var(--tab-min-height) !important;
}
#titlebar {
  margin-bottom: calc(var(--tab-min-height)*-1) !important;
}
#main-window[sizemode="maximized"] #titlebar {
  margin-bottom: calc(6px + var(--tab-min-height)*-1) !important;
}
#titlebar:active {
  margin-bottom: 0 !important;
}
#titlebar:active #titlebar-content {
  margin-bottom: var(--tab-min-height) !important;
}
/* Remove unnecessary buttons and the blank areas at left and right */
#tabbrowser-tabs .scrollbutton-up, #tabbrowser-tabs .scrollbutton-down, 
#alltabs-button, .tabbrowser-tab:not([fadein]), 
.titlebar-placeholder[type="pre-tabs"], 
.titlebar-placeholder[type="post-tabs"] {
  display: none;
}
/* Ensure a border between tabs (#aaa is a light gray) */
.tabbrowser-tab:not(:last-of-type) {
  border-right: 1px solid #aaa !important;
}

/*
 * Taken from Reddit
 * https://www.reddit.com/r/FirefoxCSS/comments/7dclp7/multirow_tabs_in_ff57/
 */

/* New activity in tab */
.tabbrowser-tab[titlechanged] .tab-text.tab-label {
  color: #990000 !important;
  font-style: italic !important;
}

/* Selected (loaded) */
.tabbrowser-tab[selected="true"] .tab-label {
  color: #eee !important;
  font-style: normal !important;
  font-weight: bold !important;
  text-shadow: 1px 2px 1px #000 !important;
}

/* Loaded but unread (not selected) */
.tabbrowser-tab:not([selected="true"])[unread] .tab-label {
  color: #FF00FF !important;
  font-style: normal !important;
}

/* Not loaded yet (also visited) */
.tabbrowser-tab:not([selected="true"])[pending] .tab-label,
.tabbrowser-tab:not([selected="true"])[visited] .tab-label {
  color: #FF0000 !important;
  font-style: italic !important;
}

/* loading */
.tabbrowser-tab[busy] .tab-text.tab-label {
  color: #006bb3 !important;
  font-style: italic !important;
}

/* tab hover shows close button, but current tab always shows it */
.tabbrowser-tab:not([pinned]):hover .tab-close-button {
  display: -moz-box !important
}

